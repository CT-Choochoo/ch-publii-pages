<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>调用百度翻译API翻译JSON特定文本 - As One Wants</title><meta name="description" content="1. 准备 申请百度翻译API 每月有免费额度,适合个人轻量使用 ​ 使用到的工具包&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><meta name="theme-color" content="#17181E" media="(prefers-color-scheme: dark)"><meta name="theme-color" content="#2A2C33" media="(prefers-color-scheme: light)"><meta name="msapplication-navbutton-color" content="#2A2C33"><meta name="apple-mobile-web-app-status-bar-style" content="#2A2C33"><script async defer="defer" type="text/javascript" src="" data-website-id="74fc0332-4948-4dfe-9825-7ef3229acbce" data-auto-track="true" data-do-not-track="true" data-cache="false"></script><link rel="canonical" href="https://ct-choochoo.github.io/ch-publii-pages/diao-yong-bai-du-fan-yi-apifan-yi-jsonte-ding-wen-ben/"><link rel="alternate" type="application/atom+xml" href="https://ct-choochoo.github.io/ch-publii-pages/feed.xml"><link rel="alternate" type="application/json" href="https://ct-choochoo.github.io/ch-publii-pages/feed.json"><meta property="og:title" content="调用百度翻译API翻译JSON特定文本 - As One Wants "><meta property="og:image" content="https://ct-choochoo.github.io/ch-publii-pages/media/posts/17/141.jpg"><meta property="og:image:width" content="640"><meta property="og:image:height" content="640"><meta property="og:site_name" content="As One Wants"><meta property="og:description" content="1. 准备 申请百度翻译API 每月有免费额度,适合个人轻量使用 ​ 使用到的工具包&hellip;"><meta property="og:url" content="https://ct-choochoo.github.io/ch-publii-pages/diao-yong-bai-du-fan-yi-apifan-yi-jsonte-ding-wen-ben/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://ct-choochoo.github.io/ch-publii-pages/media/website/Calm.svg" type="image/x-icon"><link rel="preload" href="https://ct-choochoo.github.io/ch-publii-pages/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://ct-choochoo.github.io/ch-publii-pages/assets/dynamic/fonts/redhatmono/redhatmono.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://ct-choochoo.github.io/ch-publii-pages/assets/css/style.css?v=855e32e981f98461e83a3606ba6b5549"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://ct-choochoo.github.io/ch-publii-pages/diao-yong-bai-du-fan-yi-apifan-yi-jsonte-ding-wen-ben/"},"headline":"调用百度翻译API翻译JSON特定文本","datePublished":"2023-03-17T12:11","dateModified":"2023-03-29T00:20","image":{"@type":"ImageObject","url":"https://ct-choochoo.github.io/ch-publii-pages/media/posts/17/141.jpg","height":640,"width":640},"description":"1. 准备 申请百度翻译API 每月有免费额度,适合个人轻量使用 ​ 使用到的工具包&hellip;","author":{"@type":"Person","name":"铁柱","url":"https://ct-choochoo.github.io/ch-publii-pages/authors/tiezhu/"},"publisher":{"@type":"Organization","name":"铁柱"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><script async defer="defer" src="https://analytics.umami.is/script.js" data-website-id="74fc0332-4948-4dfe-9825-7ef3229acbce"></script><link rel="stylesheet" href="https://ct-choochoo.github.io/ch-publii-pages/media/plugins/docSearch/docsearch.min.css"></head><body><div class="container js-container"><nav class="menu"><ul class="navbar__menu"><li><a href="https://ct-choochoo.github.io/ch-publii-pages/" target="_self">home</a></li><li><a href="https://ct-choochoo.github.io/ch-publii-pages/tags/" target="_self">标签</a></li><li class="has-submenu"><span>工作</span><ul class="navbar__submenu"><li class="has-submenu"><span>语言</span><ul class="navbar__submenu"><li><a href="https://ct-choochoo.github.io/ch-publii-pages/tags/biao-qian/" target="_self">java</a></li><li><a href="https://ct-choochoo.github.io/ch-publii-pages/tags/python/" target="_self">python</a></li></ul></li><li class="has-submenu"><span>框架</span><ul class="navbar__submenu"><li><a href="https://ct-choochoo.github.io/ch-publii-pages/tags/springboot/" target="_self">springboot</a></li></ul></li><li><a href="https://ct-choochoo.github.io/ch-publii-pages/tags/common/" target="_self">工具</a></li></ul></li><li class="has-submenu"><a href="https://ct-choochoo.github.io/ch-publii-pages/tags/sheng-huo/" target="_self">生活</a><ul class="navbar__submenu"><li><a href="https://ct-choochoo.github.io/ch-publii-pages/tags/lu-you/" target="_self">游记</a></li></ul></li></ul></nav><div class="content"><header class="top"><div class="top__item"><a class="logo" href="https://ct-choochoo.github.io/ch-publii-pages/">As One Wants</a></div><div class="top__item top__item--right"><button class="menu-toggle js-menu-toggle" aria-label="Menu" aria-expanded="false"><span class="menu-toggle-box"><span class="menu-toggle-inner">Menu</span></span></button></div></header><main class="main"><article class="post"><div class="main__left"><figure class="hero"><img src="https://ct-choochoo.github.io/ch-publii-pages/media/posts/17/141.jpg" srcset="https://ct-choochoo.github.io/ch-publii-pages/media/posts/17/responsive/141-xs.webp 300w, https://ct-choochoo.github.io/ch-publii-pages/media/posts/17/responsive/141-sm.webp 480w, https://ct-choochoo.github.io/ch-publii-pages/media/posts/17/responsive/141-md.webp 768w, https://ct-choochoo.github.io/ch-publii-pages/media/posts/17/responsive/141-lg.webp 1024w, https://ct-choochoo.github.io/ch-publii-pages/media/posts/17/responsive/141-xl.webp 1280w, https://ct-choochoo.github.io/ch-publii-pages/media/posts/17/responsive/141-2xl.webp 1600w" sizes="(min-width: 1800px) 50vw, (min-width: 900px) 40vw, 100vw" loading="eager" height="640" width="640" alt=""></figure><header><h1>调用百度翻译API翻译JSON特定文本</h1><p><time datetime="2023-03-17T12:11">三月 17, 2023 </time>by <a href="https://ct-choochoo.github.io/ch-publii-pages/authors/tiezhu/" rel="author" title="铁柱">铁柱</a></p></header></div><div class="main__right"><div class="post__entry"><h2 id="1-准备">1. 准备</h2><p>申请百度翻译API 每月有免费额度,适合个人轻量使用</p><ol><li><a href="https://fanyi-api.baidu.com/">https://fanyi-api.baidu.com/</a></li><li>创建应用,获得 <strong>APP ID</strong> 和 <strong>密钥</strong></li></ol><h2 id="2处理json">2.处理json</h2><p>​</p><blockquote><p>使用到的工具包</p><p>​	fastjson : 解析json</p><p>​	HttpUtil : 发送翻译请求</p></blockquote><h3 id="21-导入需要的工具包">2.1 导入需要的工具包</h3><pre><code class="language-xml">    &lt;dependency&gt;
      &lt;groupId&gt;cn.hutool&lt;/groupId&gt;
      &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;
      &lt;version&gt;5.8.2&lt;/version&gt;
    &lt;/dependency&gt;
        &lt;dependency&gt;
      &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
      &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
      &lt;version&gt;2.0.21.graal&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre><h3 id="22-解析并处理json数据">2.2 解析并处理json数据</h3><pre><code class="language-java">package com.youxuepai.demo.youdao;

import cn.hutool.http.HttpUtil;
import com.alibaba.fastjson2.JSON;
import com.alibaba.fastjson2.JSONArray;
import com.alibaba.fastjson2.JSONObject;
import java.nio.charset.StandardCharsets;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.HashMap;
import java.util.Map;
import java.util.Random;
import javax.xml.bind.DatatypeConverter;
import org.apache.commons.lang3.StringUtils;

public class BaiduTranslateApi {

  /**
   * 百度翻译API
   */
  private static final String API_URL = &quot;http://api.fanyi.baidu.com/api/trans/vip/translate&quot;;

  /**
   * APP_ID
   */
  private static final String APP_ID = &quot;APP_ID&quot;;

  /**
   * 秘钥
   */
  private static final String SECRET_KEY = &quot;SECRET_KEY&quot;;


  /**
   * json文本
   */
  private static final String js = &quot;json文本&quot;;

  /**
   * 百度翻译方法
   *
   * @param query 要翻译的文字
   * @param from  翻译原文语言（自动检测为auto）
   * @param to    翻译目标语言
   * @return 翻译结果
   * @throws NoSuchAlgorithmException
   */
  public static String translate(String query, String from, String to)
      throws NoSuchAlgorithmException, InterruptedException {
    // 请求参数
    Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();
    params.put(&quot;q&quot;, query);
    params.put(&quot;from&quot;, from);
    params.put(&quot;to&quot;, to);
    // 签名相关参数
    String salt = String.valueOf(new Random().nextInt(10000));
    String sign = md5(APP_ID + query + salt + SECRET_KEY);
    params.put(&quot;appid&quot;, APP_ID);
    params.put(&quot;salt&quot;, salt);
    params.put(&quot;sign&quot;, sign);
    // 发送请求并返回翻译结果
    Thread.sleep(1100L);
    String s = HttpUtil.get(API_URL, params);
    JSONObject jsonObject = JSON.parseObject(s);
    if (jsonObject.get(&quot;error_code&quot;) != null) {
      return query;
    } else {
      JSONArray transResult = (JSONArray) jsonObject.get(&quot;trans_result&quot;);
      JSONObject o = (JSONObject) transResult.get(0);
      return o.get(&quot;dst&quot;).toString();
    }
  }

  /**
   * MD5签名计算方法
   *
   * @param input 待签名字符串
   * @return 签名结果
   * @throws NoSuchAlgorithmException
   */
  private static String md5(String input)
      throws NoSuchAlgorithmException {
    MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);
    byte[] messageDigest = md.digest(input.getBytes(StandardCharsets.UTF_8));
    return DatatypeConverter.printHexBinary(messageDigest).toLowerCase();
  }

  private static void processJson(JSONObject jsonObject, String targetKey,
      ValueProcessor processor) throws NoSuchAlgorithmException, InterruptedException {
    for (String key : jsonObject.keySet()) {
      Object value = jsonObject.get(key);
      if (key.equals(targetKey)) {
        jsonObject.put(key, processor.process(value));
      }
      if (value instanceof JSONObject) {
        processJson((JSONObject) value, targetKey, processor);
      } else if (value instanceof JSONArray) {
        processJson((JSONArray) value, targetKey, processor);
      }
    }
  }

  private static void processJson(JSONArray jsonArray, String targetKey, ValueProcessor processor)
      throws NoSuchAlgorithmException, InterruptedException {
    for (int i = 0; i &lt; jsonArray.size(); i++) {
      Object value = jsonArray.get(i);
      if (value instanceof JSONObject) {
        processJson((JSONObject) value, targetKey, processor);
      } else if (value instanceof JSONArray) {
        processJson((JSONArray) value, targetKey, processor);
      }
    }
  }


  interface ValueProcessor {

    Object process(Object value) throws NoSuchAlgorithmException, InterruptedException;
  }


  public static void main(String[] args) throws NoSuchAlgorithmException, InterruptedException {

    JSONObject jsonObject = JSON.parseObject(js);
    processJson(jsonObject, &quot;label&quot;, (value) -&gt; {
      if (StringUtils.isBlank(value.toString())) {
        return value;
      }
      String translate = translate(value.toString(), &quot;auto&quot;, &quot;zh&quot;);
      System.out.println(&quot;翻译:&quot; + value + &quot;-&gt;&quot; + translate);
      return translate;
    });
    System.out.println(JSON.toJSONString(jsonObject));
  }

}
</code></pre><p>处理后输出翻译后json, 由于使用的是免费的api一秒钟限制请求一次, 如果是vip的话可以去掉 <code>#translate().Thread.sleep(1100L);</code></p><footer><div class="post__tag-share"><div class="post__share"></div></div><div class="post__bio"><h3><a href="https://ct-choochoo.github.io/ch-publii-pages/authors/tiezhu/" title="铁柱">铁柱</a></h3></div></footer></div></div></article><div class="main__right"><div class="评论"><div class="comments-wrapper"><h5>评论区</h5><div id="cusdis_thread" data-host="https://cusdis.com" data-app-id="a6b326ad-a95f-4d7f-9076-1b06f4819430" data-page-id="17" data-page-url="https://ct-choochoo.github.io/ch-publii-pages/diao-yong-bai-du-fan-yi-apifan-yi-jsonte-ding-wen-ben/" data-page-title="调用百度翻译API翻译JSON特定文本" data-theme="light"></div><noscript>Please enable JS to use the comments form.</noscript><script type="text/javascript">var cusdis_element_to_check = document.getElementById('cusdis_thread');

				if ('IntersectionObserver' in window) {
					var iObserver = new IntersectionObserver(
						(entries, observer) => {
							entries.forEach(entry => {
								if (entry.intersectionRatio >= 0.1) {
									(function () {
										var d = document, s = d.createElement('script');
										s.defer = true;
										s.src = 'https://cusdis.com/js/cusdis.es.js';									
										(d.head || d.body).appendChild(s);
									})();
									observer.unobserve(entry.target);
								}
							});
						},
						{
							threshold: [0, 0.2, 0.5, 1]
						}
					);

					iObserver.observe(cusdis_element_to_check);
				} else {
					(function () {
						var d = document, s = d.createElement('script');
						s.defer = true;
						s.src = 'https://cusdis.com/js/cusdis.es.js';
						(d.head || d.body).appendChild(s);
					})();
				}</script><script type="text/javascript"></script></div></div><div class="banner banner--after-post"><script async defer="defer" src="https://cusdis.com/js/widget/lang/zh-cn.js"></script><script defer="defer" data-host="https://cusdis.com" data-app-id="{{id}}" src="https://cusdis.com/js/cusdis-count.umd.js"></script><div id="cusdis_thread" data-host="https://cusdis.com" data-app-id="a6b326ad-a95f-4d7f-9076-1b06f4819430" data-page-id="{{id}}" data-page-url="{{url}} " data-page-title="{{title}}"></div></div></div></main><footer class="footer"><div class="footer__copyright"><div style="text-align: left;"><a href="https://beian.miit.gov.cn/">陕ICP备2022014196号-1</a></div></div></footer></div></div><script defer="defer" src="https://ct-choochoo.github.io/ch-publii-pages/assets/js/scripts.min.js?v=27706a8fe221267c1834098c796f44c1"></script><script>var images = document.querySelectorAll('img[loading]');
   
           for (var i = 0; i < images.length; i++) {
               if (images[i].complete) {
                   images[i].classList.add('is-loaded');
               } else {
                   images[i].addEventListener('load', function () {
                       this.classList.add('is-loaded');
                   }, false);
               }
           }</script><script defer="defer" data-host="https://cusdis.com" data-app-id="a6b326ad-a95f-4d7f-9076-1b06f4819430" src="https://cusdis.com/js/cusdis-count.umd.js"></script><script src="https://ct-choochoo.github.io/ch-publii-pages/media/plugins/docSearch/docsearch.min.js"></script><script type="text/javascript">docsearch({
   				container: '#docsearch',
   				appId: '1940K55EKT',
   				indexName: 'blog_aow',
   				apiKey: '965ece45fd8bcfe08b8ce02572e77ea7',
   				debug: false
   			});</script></body></html>